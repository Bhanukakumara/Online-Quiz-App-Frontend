<div class="submission-chart-container">
  <!-- Header with live stats -->
  <div class="stats-header">
    <div class="stats-cards">
      <div class="stat-card">
        <div class="stat-value">{{ currentMinuteCount }}</div>
        <div class="stat-label">Current Minute</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">{{ todayTotal }}</div>
        <div class="stat-label">Today's Total</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">{{ lastUpdated | date:'HH:mm:ss' }}</div>
        <div class="stat-label">Last Updated</div>
      </div>
    </div>
    
    <!-- Controls -->
    <div class="chart-controls">
      <div class="time-range-buttons">
        <button 
          class="btn" 
          [class.active]="timeRange === 30"
          (click)="changeTimeRange(30)">
          30 Min
        </button>
        <button 
          class="btn" 
          [class.active]="timeRange === 60"
          (click)="changeTimeRange(60)">
          1 Hour
        </button>
        <button 
          class="btn" 
          [class.active]="timeRange === 120"
          (click)="changeTimeRange(120)">
          2 Hours
        </button>
      </div>
      
      <button class="btn refresh-btn" (click)="refreshData()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="23,4 23,10 17,10"></polyline>
          <polyline points="1,20 1,14 7,14"></polyline>
          <path d="M20.49,9A9,9,0,0,0,5.64,5.64L1,10m22,4L18.36,18.36A9,9,0,0,1,3.51,15"></path>
        </svg>
        Refresh
      </button>
    </div>
  </div>

  <!-- Error display -->
  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <!-- Loading indicator -->
  <div *ngIf="isLoading" class="loading-indicator">
    <div class="spinner"></div>
    <span>Loading chart data...</span>
  </div>

  <!-- Chart container -->
  <div class="chart-wrapper">
    <canvas #chartCanvas></canvas>
  </div>
</div>